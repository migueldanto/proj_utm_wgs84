var $ProjUtmWgs84={wgs84_to_utm:function(t,a){var o={res:!1,msg:"NOT CALCULATED",x:0,y:0,zone:0,hemisphere:""};if(180>=a&&a>=-180&&90>t&&t>-90?o.res=!0:o.msg="Latitud o longitud no estan dentro del rango",o.res){o.zone=Math.floor((a+180)/6)+1;var h=this.funciones.DegToRad(t),s=this.funciones.DegToRad(a),M=this.funciones.LatLonToUTMXY(h,s,o.zone);o.x=M.x,o.y=M.y,o.hemisphere=0>t?"S":"N",o.msg="calculated"}return o},utm_to_wgs84:function(t,a,o,h){var s={res:!1,msg:"NOT CALCULATED",lat:0,lon:0},M=!1,i=!1;if("N"==h||"n"==h?(i=!0,M=!1):("S"==h||"s"==h)&&(i=!0,M=!0),i){s.res=!0;var n=this.funciones.UTMXYToLatLon(t,a,o,M);s.msg="calculated",s.lat=this.funciones.RadToDeg(n.lat),s.lon=this.funciones.RadToDeg(n.lon)}else s.msg="el hemisferio debe ser en N o S ";return s},funciones:{UTMXYToLatLon:function(t,a,o,h){var s;t-=5e5,t/=this.UTMScaleFactor,h&&(a-=1e7),a/=this.UTMScaleFactor,s=this.UTMCentralMeridian(o);var M=this.MapXYToLatLon(t,a,s),i={lat:M[0],lon:M[1]};return i},MapXYToLatLon:function(t,a,o){var h,s,M,i,n,e,r,p,w,c,u,m,T,_,l,L,f,d,g,v,U,b,D,S;h=this.FootpointLatitude(a),n=(Math.pow(this.sm_a,2)-Math.pow(this.sm_b,2))/Math.pow(this.sm_b,2),w=Math.cos(h),i=n*Math.pow(w,2),s=Math.pow(this.sm_a,2)/(this.sm_b*Math.sqrt(1+i)),M=s,e=Math.tan(h),r=e*e,p=r*r,c=1/(M*w),M*=s,u=e/(2*M),M*=s,m=1/(6*M*w),M*=s,T=e/(24*M),M*=s,_=1/(120*M*w),M*=s,l=e/(720*M),M*=s,L=1/(5040*M*w),M*=s,f=e/(40320*M),d=-1-i,g=-1-2*r-i,v=5+3*r+6*i-6*r*i-3*i*i-9*r*i*i,U=5+28*r+24*p+6*i+8*r*i,b=-61-90*r-45*p-107*i+162*r*i,D=-61-662*r-1320*p-720*p*r,S=1385+3633*r+4095*p+1575*p*r;var X=h+u*d*t*t+T*v*Math.pow(t,4)+l*b*Math.pow(t,6)+f*S*Math.pow(t,8),Y=o+c*t+m*g*Math.pow(t,3)+_*U*Math.pow(t,5)+L*D*Math.pow(t,7);return[X,Y]},FootpointLatitude:function(t){var a,o,h,s,M,i,n,e;return n=(this.sm_a-this.sm_b)/(this.sm_a+this.sm_b),o=(this.sm_a+this.sm_b)/2*(1+Math.pow(n,2)/4+Math.pow(n,4)/64),a=t/o,h=3*n/2+-27*Math.pow(n,3)/32+269*Math.pow(n,5)/512,s=21*Math.pow(n,2)/16+-55*Math.pow(n,4)/32,M=151*Math.pow(n,3)/96+-417*Math.pow(n,5)/128,i=1097*Math.pow(n,4)/512,e=a+h*Math.sin(2*a)+s*Math.sin(4*a)+M*Math.sin(6*a)+i*Math.sin(8*a)},LatLonToUTMXY:function(t,a,o){var h=this.UTMCentralMeridian(o),s=this.MapLatLonToXY(t,a,h),M=s[0],i=s[1];return M=M*this.UTMScaleFactor+5e5,i*=this.UTMScaleFactor,0>i&&(i+=1e7),{x:M,y:i}},MapLatLonToXY:function(t,a,o){var h,s,M,i,n,e,r,p,w,c,u,m,T;M=(Math.pow(this.sm_a,2)-Math.pow(this.sm_b,2))/Math.pow(this.sm_b,2),s=M*Math.pow(Math.cos(t),2),h=Math.pow(this.sm_a,2)/(this.sm_b*Math.sqrt(1+s)),i=Math.tan(t),n=i*i,T=n*n*n-Math.pow(i,6),e=a-o,r=1-n+s,p=5-n+9*s+4*s*s,w=5-18*n+n*n+14*s-58*n*s,c=61-58*n+n*n+270*s-330*n*s,u=61-479*n+179*n*n-n*n*n,m=1385-3111*n+543*n*n-n*n*n;var _=h*Math.cos(t)*e+h/6*Math.pow(Math.cos(t),3)*r*Math.pow(e,3)+h/120*Math.pow(Math.cos(t),5)*w*Math.pow(e,5)+h/5040*Math.pow(Math.cos(t),7)*u*Math.pow(e,7),l=this.ArcLengthOfMeridian(t)+i/2*h*Math.pow(Math.cos(t),2)*Math.pow(e,2)+i/24*h*Math.pow(Math.cos(t),4)*p*Math.pow(e,4)+i/720*h*Math.pow(Math.cos(t),6)*c*Math.pow(e,6)+i/40320*h*Math.pow(Math.cos(t),8)*m*Math.pow(e,8);return[_,l]},ArcLengthOfMeridian:function(t){var a,o,h,s,M,i,n;return i=(this.sm_a-this.sm_b)/(this.sm_a+this.sm_b),a=(this.sm_a+this.sm_b)/2*(1+Math.pow(i,2)/4+Math.pow(i,4)/64),o=-3*i/2+9*Math.pow(i,3)/16+-3*Math.pow(i,5)/32,h=15*Math.pow(i,2)/16+-15*Math.pow(i,4)/32,s=-35*Math.pow(i,3)/48+105*Math.pow(i,5)/256,M=315*Math.pow(i,4)/512,n=a*(t+o*Math.sin(2*t)+h*Math.sin(4*t)+s*Math.sin(6*t)+M*Math.sin(8*t))},UTMCentralMeridian:function(t){var a=this.DegToRad(-183+6*t);return a},DegToRad:function(t){return t/180*this.pi},RadToDeg:function(t){return t/this.pi*180},pi:3.14159265358979,sm_a:6378137,sm_b:6356752.314,sm_EccSquared:.00669437999013,UTMScaleFactor:.9996}};
